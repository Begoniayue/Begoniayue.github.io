import{r as v,a as x,b as m,c as U,w as S,m as b,h as P,e as c,i as I,d as e,u as F,f as h,t as V,n as E,l as f,q as y,g as M,s as N,F as T,p as $,j,x as i}from"./index-ZKZBXv4v.js";import{_ as q}from"./_plugin-vue_export-helper-x3n3nnut.js";const z="/assets/signin-FgEVIJrF.png",D=e("p",null,"Bla bla ...",-1),L=e("p",null,"Bla bla ...",-1),G=e("p",null,"Bla bla ...",-1),H={__name:"agree",emits:["close"],setup(p,{emit:a}){let l=v(!0),n=a;const s=()=>{n("close",!1)},_=()=>{n("close",!0)};return(C,k)=>{const w=x("a-button"),u=x("a-modal");return m(),U(u,{open:c(l),"onUpdate:open":k[0]||(k[0]=g=>I(l)?l.value=g:l=g),title:"《鲸云用户协议》",onCancel:s},{footer:S(()=>[P(w,{key:"submit",type:"primary",onClick:_},{default:S(()=>[b("我已阅读并同意")]),_:1})]),default:S(()=>[D,L,G]),_:1},8,["open"])}}},d=p=>($("data-v-480d9d86"),p=p(),j(),p),K={class:"signin-form"},Q={class:"signin-form-grid"},W={class:"wrapper"},X={class:"title"},Y=d(()=>e("span",null,"鲸云",-1)),Z=d(()=>e("div",{class:"signin-left-img"},[e("img",{src:z,class:"img-responsive",alt:"img"})],-1)),ee={class:"form-right-inf"},se={class:"login-form-content"},oe={class:"login-form",action:""},te={class:"one-frm"},ae=d(()=>e("label",null,"用户名",-1)),le={class:"one-frm"},ne=d(()=>e("label",null,"密码",-1)),re={key:0,class:"one-frm"},ce=d(()=>e("label",null,"确认密码",-1)),ie={key:1,class:"check-remaind-wrap"},de={class:"check-remaind"},ue=d(()=>e("span",{class:"checkmark"},null,-1)),me=d(()=>e("p",{class:"remember"},"记住密码",-1)),pe={key:2,class:"check-remaind-wrap"},_e={class:"check-remaind"},ge=d(()=>e("span",{class:"checkmark"},null,-1)),he={key:3,class:"already"},fe={key:4,class:"already"},ve=d(()=>e("div",{class:"copyright"},[e("div",{class:"wrapper"},[e("p",null,"© Copyright © 2024 版权所有 鲸云智能科技有限公司")])],-1)),be={__name:"index",props:{mode:{type:String}},setup(p){const a=p,l=localStorage.getItem("rememberAccount")?JSON.parse(localStorage.getItem("rememberAccount")):null;let n=v(!!localStorage.getItem("isRememberMe")),s=v({username:n.value&&a.mode==="登录"?l==null?void 0:l.username:"",password:n.value&&a.mode==="登录"?l==null?void 0:l.password:"",confirmPassword:""});const _=F(),C=()=>{_.push("/sign-up")},k=()=>{_.push("/sign-in")},w=()=>{if(!s.value.username||!s.value.password){i.error("请将账号信息填写完整");return}var r=[];r=localStorage.getItem("user_account_db")?JSON.parse(localStorage.getItem("user_account_db")):[];let o=r.find(t=>t.username===s.value.username);if(o)o.password===s.value.password?(localStorage.setItem("rememberAccount",JSON.stringify(s.value)),i.success("登录成功"),_.push("/test")):i.error("密码错误");else{i.error("账号不存在，请先注册账号");return}};let u=v(!1),g=v(!1);const B=()=>{g.value=!0},A=r=>{u.value=r,g.value=!1},R=()=>{if(!s.value.username||!s.value.password||!s.value.confirmPassword){i.error("请将账号信息填写完整");return}if(!u.value){i.error("请先阅读并同意协议");return}{let r={username:s.value.username,password:s.value.password},o=localStorage.getItem("user_account_db")?JSON.parse(localStorage.getItem("user_account_db")):[];if(s.value.password!==s.value.confirmPassword){i.error("两次密码输入不一致");return}if(o.some(t=>t.username===r.username)){i.error("用户名已存在");return}else o.push(r),localStorage.setItem("user_account_db",JSON.stringify(o)),i.success("注册成功"),_.push("/")}},J=()=>{n.value?localStorage.setItem("isRememberMe",n.value):localStorage.removeItem("isRememberMe")},O=r=>{r.preventDefault(),a.mode==="登录"?w():R()};return(r,o)=>(m(),h(T,null,[e("section",K,[e("div",Q,[e("div",W,[e("div",X,[e("h1",null,[Y,b(" "+V(a.mode),1)])]),e("div",{class:E(["signin-block-grid",{"align-end":a.mode==="登录"}])},[Z,e("div",ee,[e("div",se,[e("form",oe,[e("div",te,[ae,f(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>c(s).username=t),placeholder:""},null,512),[[y,c(s).username]])]),e("div",le,[ne,f(e("input",{type:"password","onUpdate:modelValue":o[1]||(o[1]=t=>c(s).password=t),placeholder:""},null,512),[[y,c(s).password]])]),a.mode==="注册"?(m(),h("div",re,[ce,f(e("input",{type:"password","onUpdate:modelValue":o[2]||(o[2]=t=>c(s).confirmPassword=t),placeholder:""},null,512),[[y,c(s).confirmPassword]])])):M("",!0),a.mode==="登录"?(m(),h("div",ie,[e("label",de,[f(e("input",{type:"checkbox","onUpdate:modelValue":o[3]||(o[3]=t=>I(n)?n.value=t:n=t),onChange:J},null,544),[[N,c(n)]]),ue]),me])):(m(),h("div",pe,[e("label",_e,[f(e("input",{type:"checkbox","onUpdate:modelValue":o[4]||(o[4]=t=>I(u)?u.value=t:u=t)},null,512),[[N,c(u)]]),ge]),e("p",{class:"remember"},[b("我已阅读并同意"),e("span",{class:"agreement",onClick:B},"《鲸云用户协议》")])])),e("button",{class:"btn btn-style mt-3",onClick:O},V(a.mode),1),a.mode==="登录"?(m(),h("p",he,[b("还没有账号? "),e("a",{onClick:C},"注册")])):(m(),h("p",fe,[b("已有账号? "),e("a",{onClick:k},"登录")]))])])])],2)])]),ve]),c(g)?(m(),U(H,{key:0,onClose:A})):M("",!0)],64))}},Se=q(be,[["__scopeId","data-v-480d9d86"]]);export{Se as S};
